



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="fr">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.1.0">
    
    
      
        <title>Lire/Écrire sur les pins analogiques - Rascol Sin</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.11e41852.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../../assets/javascripts/modernizr.20ef595d.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="blue-grey">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#lireecrire-sur-les-pins-analogiques" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Rascol Sin" class="md-header-nav__button md-logo">
          
            <i class="md-icon">code</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Rascol Sin
              </span>
              <span class="md-header-nav__topic">
                Lire/Écrire sur les pins analogiques
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/rascolsin/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      rascolsin
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." title="Home" class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    
  </li>

      
        
  <li class="md-tabs__item">
    
      <a href="../../../snt/" title="SNT" class="md-tabs__link md-tabs__link--active">
        SNT
      </a>
    
  </li>

      
        
  <li class="md-tabs__item">
    
      <a href="../../../si-cit/" title="SI-CIT" class="md-tabs__link md-tabs__link--active">
        SI-CIT
      </a>
    
  </li>

      
        
  <li class="md-tabs__item">
    
      <a href="../../" title="PSTI2D" class="md-tabs__link md-tabs__link--active">
        PSTI2D
      </a>
    
  </li>

      
        
  <li class="md-tabs__item">
    
      <a href="../../../tsti2d/" title="TSTI2D" class="md-tabs__link md-tabs__link--active">
        TSTI2D
      </a>
    
  </li>

      
        
  <li class="md-tabs__item">
    
      <a href="../../../tutos/" title="Tutoriels" class="md-tabs__link md-tabs__link--active">
        Tutoriels
      </a>
    
  </li>

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Rascol Sin" class="md-nav__button md-logo">
      
        <i class="md-icon">code</i>
      
    </a>
    Rascol Sin
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/rascolsin/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      rascolsin
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../snt/" title="SNT" class="md-nav__link">
      SNT
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../si-cit/" title="SI-CIT" class="md-nav__link">
      SI-CIT
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../" title="PSTI2D" class="md-nav__link">
      PSTI2D
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../tsti2d/" title="TSTI2D" class="md-nav__link">
      TSTI2D
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../tutos/" title="Tutoriels" class="md-nav__link">
      Tutoriels
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-analogread" title="1. analogRead()" class="md-nav__link">
    1. analogRead()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-conversion-numerique-analogique" title="1.1 Conversion Numérique Analogique" class="md-nav__link">
    1.1 Conversion Numérique Analogique
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-utiliser-le-can-avec-arduino" title="1.2 Utiliser le CAN avec Arduino" class="md-nav__link">
    1.2 Utiliser le CAN avec Arduino
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-analogwrite" title="2. analogWrite()" class="md-nav__link">
    2. analogWrite()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-modulation-de-largeur-dimpulsion" title="2.1 Modulation de Largeur d'Impulsion" class="md-nav__link">
    2.1 Modulation de Largeur d'Impulsion
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#22-utiliser-le-pwm-avec-arduino" title="2.2 Utiliser le PWM avec Arduino" class="md-nav__link">
    2.2 Utiliser le PWM avec Arduino
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/rascolsin/edit/master/docs/psti2d/arduino/04_2-analogRead_analogWrite.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="lireecrire-sur-les-pins-analogiques">Lire/Écrire sur les pins analogiques</h1>
<p>L'environnement Arduino nous permet d'utiliser de manière simple deux fonctions essentielles d'un microcontrôleur le CAN et le PWM, nous donnons dans ce cours les explications quant à leurs paramétrages et leurs utilisations.</p>
<h2 id="1-analogread">1. <code class="codehilite">analogRead()</code></h2>
<p>Nous rappelons ci-dessous l'emplacement des pins analogiques sur une carte Arduino UNO et MEGA :</p>
<p><img alt="" src="/psti2d/arduino/figures/PinsAnaArduino.svg" /></p>
<h3 id="11-conversion-numerique-analogique">1.1 Conversion Numérique Analogique</h3>
<p>Les cartes Arduino UNO et MEGA disposent toutes deux d'un Convertisseur Analogique Numérique de 10 bits intégré au micro-contrôleur, la figure ci-dessous vise à expliquer son fonctionnement :</p>
<p><img alt="" src="/psti2d/arduino/figures/FigureCAN.svg" /></p>
<p>Une carte Arduino dispose de 6 entrées analogiques A0 à A5 pour le UNO, 16 de A0 à A15 pour le MEGA. L'entrée du convertisseur <span><span class="MathJax_Preview">V_{a0}</span><script type="math/tex">V_{a0}</script></span> accepte une <strong>tension analogiques comprise entre 0 et 5V maximum, qui sera convertie en un nombre binaire N compris entre 0 et 1023</strong>.</p>
<p>Nous déduisons alors la caractéristique entrée/sortie du CAN :</p>
<p><img alt="" src="/psti2d/arduino/figures/CaracCAN.svg" /></p>
<p>Le quantum q est la plage de tension analogique qui permet à la sortie N de croître d'une marche quand celle-ci est dépassée :</p>
<div>
<div class="MathJax_Preview">
q=\frac{V_{pe}}{2^{n}}=\frac{5}{2^{10}}=4.88mV
</div>
<script type="math/tex; mode=display">
q=\frac{V_{pe}}{2^{n}}=\frac{5}{2^{10}}=4.88mV
</script>
</div>
<p>À partir de la droite rouge nous obtenons l'équation du CAN :</p>
<div>
<div class="MathJax_Preview">
(N)_{10}=\frac{1023}{5}\times V_{a0}
</div>
<script type="math/tex; mode=display">
(N)_{10}=\frac{1023}{5}\times V_{a0}
</script>
</div>
<p>On peut alors en déduire les valeurs <span><span class="MathJax_Preview">N_{min}</span><script type="math/tex">N_{min}</script></span> et <span><span class="MathJax_Preview">N_{max}</span><script type="math/tex">N_{max}</script></span> :</p>
<div>
<div class="MathJax_Preview">
N_{min}=(0000000000)_{2}=(0)_{10}
</div>
<script type="math/tex; mode=display">
N_{min}=(0000000000)_{2}=(0)_{10}
</script>
</div>
<div>
<div class="MathJax_Preview">
N_{max}=2^{10}-1=(1111111111)_{2}=(1023)_{10}
</div>
<script type="math/tex; mode=display">
N_{max}=2^{10}-1=(1111111111)_{2}=(1023)_{10}
</script>
</div>
<h3 id="12-utiliser-le-can-avec-arduino">1.2 Utiliser le CAN avec Arduino</h3>
<p>L'utilisation du CAN avec Arduino est très simple, il suffit d'utiliser la fonction <code class="codehilite">analogRead()</code>, nous donnons ci-dessous sa structure :</p>
<p><img alt="" src="/psti2d/arduino/figures/analogRead.svg" /></p>
<p>Le code suivant lit la valeur analogique sur la pin A0 et la convertit en <code class="codehilite">N</code> en utilisant la fonction <code class="codehilite">analogRead</code>. La variable <code class="codehilite">N</code> est ensuite convertie en Volts grâce à l'équation de la droite du CAN, pour obtenir finalement la variable <code class="codehilite">Va0</code>.</p>
<div class="codehilite"><pre><span></span><span class="k">const</span> <span class="kt">int</span> <span class="n">PinAna</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="c1">//Déclaration d&#39;une constante de type int et de nom &quot;PinAna&quot;, contenant 0 la pin analogique à lire</span>
<span class="kt">float</span> <span class="n">VaO</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="c1">//Déclaration d&#39;une variable de type float et de nom &quot;Vao&quot;, initialisée à 0</span>
<span class="kt">int</span> <span class="n">N</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="c1">//Déclaration d&#39;une variable de type int et de nom &quot;N&quot;, initialisée à 0</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="c1">//Initialisation</span>
<span class="p">{</span>
<span class="c1">//Pas de pinMode pour analogRead()</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="c1">//Programme principal</span>
<span class="p">{</span>
    <span class="n">N</span><span class="o">=</span><span class="n">analogRead</span><span class="p">(</span><span class="n">PinAna</span><span class="p">);</span> <span class="c1">//Lecture de la valeur Va0 de la pin analogique 0 et conversion en N -&gt; 0&lt;N&lt;1023</span>
    <span class="n">Vao</span><span class="o">=</span><span class="p">(</span><span class="mf">5.0</span><span class="o">/</span><span class="mf">1023.0</span><span class="p">)</span><span class="o">*</span> <span class="n">N</span><span class="p">;</span> <span class="c1">//Conversion de N en Va0 grâce à l&#39;équation de la droite du CAN</span>
<span class="p">}</span>
</pre></div>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Ne pas déclarer la pin analogique utilisée en entrée à l'aide de <code class="codehilite">pinMode()</code> Arduino le fait de manière automatique sachant que <code class="codehilite">analogRead()</code> ne s'utilise qu'avec des pins analogiques <strong>qui ne fonctionnent qu'en entrée</strong>.</p>
</div>
<h2 id="2-analogwrite">2. <code class="codehilite">analogWrite()</code></h2>
<h3 id="21-modulation-de-largeur-dimpulsion">2.1 Modulation de Largeur d'Impulsion</h3>
<p>La MLI aussi appelée PWM (Pulse Width Modulation) en Anglais, est une technique permettant de faire varier la valeur moyenne de la tension d'un signal carré en changeant son rapport cyclique. Avant de rentrer dans les détails, revoyons un peu de vocabulaire technique.</p>
<p><img alt="" src="/psti2d/arduino/figures/CaracPWM.svg" /></p>
<p>La figure ci-dessus montre un signal carré configuré de cette manière :</p>
<ul>
<li>
<p>Période : T = 2ms</p>
</li>
<li>
<p>Fréquence : f = <span><span class="MathJax_Preview">\frac{1}{T}</span><script type="math/tex">\frac{1}{T}</script></span> = 500Hz</p>
</li>
<li>
<p>Durée de l'état bas : <span><span class="MathJax_Preview">T_b</span><script type="math/tex">T_b</script></span> = 1ms</p>
</li>
<li>
<p>Durée de l'état haut : <span><span class="MathJax_Preview">T_h</span><script type="math/tex">T_h</script></span> = 1ms</p>
</li>
<li>
<p>Tension max : <span><span class="MathJax_Preview">V_{max}</span><script type="math/tex">V_{max}</script></span> = <span><span class="MathJax_Preview">\hat{V}</span><script type="math/tex">\hat{V}</script></span> = 5V</p>
</li>
<li>
<p>Tension min : <span><span class="MathJax_Preview">V_{min}</span><script type="math/tex">V_{min}</script></span> = 0V</p>
</li>
</ul>
<p>Nous montrons ici comment calculer sa valeur moyenne :</p>
<p><img alt="" src="/psti2d/arduino/figures/CaracPWM2.svg" /></p>
<p>Formule de la valeur moyenne <span><span class="MathJax_Preview">&lt;V&gt;</span><script type="math/tex"><V></script></span> pour un signal carré et <strong>seulement pour un signal carré</strong> :</p>
<div>
<div class="MathJax_Preview">
&lt;V&gt;=\frac{\Delta T}{T}
</div>
<script type="math/tex; mode=display">
<V>=\frac{\Delta T}{T}
</script>
</div>
<p>Où <span><span class="MathJax_Preview">\Delta T</span><script type="math/tex">\Delta T</script></span> est l'aire du carré bleu :</p>
<div>
<div class="MathJax_Preview">
\Delta T =V_{max}\times T_h
</div>
<script type="math/tex; mode=display">
\Delta T =V_{max}\times T_h
</script>
</div>
<p>Nous obtenons alors :</p>
<div>
<div class="MathJax_Preview">
&lt;V&gt;=\frac{V_{max}\times T_h}{T}
</div>
<script type="math/tex; mode=display">
<V>=\frac{V_{max}\times T_h}{T}
</script>
</div>
<p>En faisant l'application numérique à la figure ci-dessus :</p>
<div>
<div class="MathJax_Preview">
&lt;V&gt;=\frac{5\times 1\times 10^{-3}}{2\times 10^{-3}}=2,5V
</div>
<script type="math/tex; mode=display">
<V>=\frac{5\times 1\times 10^{-3}}{2\times 10^{-3}}=2,5V
</script>
</div>
<p>On trace à présent la valeur moyenne <span><span class="MathJax_Preview">&lt;V&gt;</span><script type="math/tex"><V></script></span> en vert sur la figure :</p>
<p><img alt="" src="/psti2d/arduino/figures/CaracPWM3.svg" /></p>
<p>Introduisons à présent la notion de <strong>rapport cyclique</strong> <span><span class="MathJax_Preview">\alpha</span><script type="math/tex">\alpha</script></span> qui est essentielle à la compréhension du fonctionnement d'un PWM :</p>
<div>
<div class="MathJax_Preview">
\alpha=\frac{T_h}{T}
</div>
<script type="math/tex; mode=display">
\alpha=\frac{T_h}{T}
</script>
</div>
<p>Le rapport cyclique est un pourcentage : <span><span class="MathJax_Preview">0\%&lt;\alpha&lt;100\%</span><script type="math/tex">0\%<\alpha<100\%</script></span></p>
<p><strong>La technique du PWM consiste à faire varier le rapport cyclique qui revient à faire varier la valeur moyenne du signal</strong>.
Nous donnons ci-dessous des variations du rapport cyclique du signal carré précédent, <strong>tout en gardant la même fréquence</strong> f=500Hz :</p>
<ul>
<li>Pour <span><span class="MathJax_Preview">\alpha=0\%</span><script type="math/tex">\alpha=0\%</script></span></li>
</ul>
<p><img alt="" src="/psti2d/arduino/figures/CaracAlpha0.svg" /></p>
<ul>
<li>Pour <span><span class="MathJax_Preview">\alpha=10\%</span><script type="math/tex">\alpha=10\%</script></span></li>
</ul>
<p><img alt="" src="/psti2d/arduino/figures/CaracAlpha10.svg" /></p>
<ul>
<li>Pour <span><span class="MathJax_Preview">\alpha=50\%</span><script type="math/tex">\alpha=50\%</script></span></li>
</ul>
<p><img alt="" src="/psti2d/arduino/figures/CaracAlpha50.svg" /></p>
<ul>
<li>Pour <span><span class="MathJax_Preview">\alpha=90\%</span><script type="math/tex">\alpha=90\%</script></span></li>
</ul>
<p><img alt="" src="/psti2d/arduino/figures/CaracAlpha90.svg" /></p>
<ul>
<li>Pour <span><span class="MathJax_Preview">\alpha=100\%</span><script type="math/tex">\alpha=100\%</script></span></li>
</ul>
<p><img alt="" src="/psti2d/arduino/figures/CaracAlpha100.svg" /></p>
<p>Avec une fréquence élevée le composant branché en sortie du PWM <strong>ne verra que la valeur moyenne (la droite verte) du signal carré qui est continue</strong>.</p>
<p>La technique du PWM peut être utilisée dans les cas suivants :</p>
<ul>
<li>Faire varier la vitesse d'un moteur à courant continu.</li>
<li>Faire varier la luminosité d'une led.</li>
</ul>
<h4 id="22-utiliser-le-pwm-avec-arduino">2.2 Utiliser le PWM avec Arduino</h4>
<p>En environnement Arduino, le PWM s'utilise avec la fonction <code class="codehilite">analogWrite()</code>, nous donnons ci-dessous sa structure :</p>
<p><img alt="" src="/psti2d/arduino/figures/analogWrite.svg" /></p>
<p>Le choix du rapport cyclique avec la fonction <code class="codehilite">analogWrite()</code> se fait sur <strong>8 bits</strong> soit une valeur comprise entre 0 -&gt; 0% et 255 -&gt; 100%</p>
<p><strong>Le PWM ne s'utilise pas avec n'importe quelle pin ! Il faut que la pin soit numérique et que ce soit une pin PWM</strong>, nous donnons le numéro des pins utilisables avec les cartes Arduino UNO et MEGA ainsi que la fréquence dans le tableau suivant :</p>
<table>
<thead>
<tr>
<th>Carte</th>
<th>Pins PWM</th>
<th>Fréquence du PWM</th>
</tr>
</thead>
<tbody>
<tr>
<td>UNO</td>
<td>3,5,6,9,10,11</td>
<td>490Hz et 980Hz sur pins 3 et 11</td>
</tr>
<tr>
<td>MEGA</td>
<td>2 à 13, 44 à 46</td>
<td>490Hz et 980Hz sur pins 3 et 11</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les pins numériques utilisables en PWM sont notées avec un <strong>~</strong> sur les cartes Arduino.</p>
</div>
<p>Nous donnons ci-dessous un code exemple de l'utilisation de cette fonction :</p>
<div class="codehilite"><pre><span></span><span class="k">const</span> <span class="kt">int</span> <span class="n">PinPWM</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span> <span class="c1">//Déclaration d&#39;une constante de type int et de nom &quot;PinPWM&quot;, contenant 3 la pin numérique à utiliser pour le pwm</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="c1">//Initialisation</span>
<span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">PinPWM</span><span class="p">,</span><span class="n">OUTPUT</span><span class="p">);</span><span class="c1">//Mise en sortie de la pin numérique 3 pour utiliser le pwm</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="c1">//Programme principal</span>
<span class="p">{</span>
    <span class="n">analogWrite</span><span class="p">(</span><span class="n">PinPWM</span><span class="p">,</span><span class="mi">127</span><span class="p">);</span> <span class="c1">//Création d&#39;un signal PWM sur la pin numérique 3 avec un rapport cyclique de 50%</span>
<span class="p">}</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">L'ensemble du contenu du site rascolsin.fr</span> de <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Joris Serrand</span> est mis à disposition selon les termes de la <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">licence Creative Commons Attribution <br />  Partage dans les Mêmes Conditions 4.0 International</a>.  <br />Made with ❤ in <a href="https://en.wikipedia.org/wiki/Albi">Albi</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.9e1f3b71.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../../assets/javascripts/lunr/lunr.fr.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
    
  </body>
</html>